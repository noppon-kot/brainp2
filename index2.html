<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Number Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    .hidden {
      display: none;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
    }
    .correct {
      color: green;
      font-size: 24px; /* ขยายขนาดฟอนต์สำหรับข้อความ "Correct!" */
    }
    .wrong {
      color: red;
      font-size: 24px; /* ขยายขนาดฟอนต์สำหรับข้อความ "Wrong!" */
    }
    #summary p {
      font-size: 20px; /* ขยายขนาดฟอนต์สำหรับข้อความใน summary */
    }
  </style>
</head>
<body>
  <div id="screen1">
    <h1>Press Enter to Start</h1>
  </div>

  <div id="screen2" class="hidden">
    <div id="numbers"></div>
  </div>

  <div id="screen3" class="hidden">
    <h1>Enter Your Answer</h1>
    <input type="text" id="userAnswer" placeholder="Enter the total sum" />
  </div>

  <div id="screen4" class="hidden">
    <h1>Result</h1>
    <div id="summary"></div>
    <button onclick="restartGame()">Play Again</button>
  </div>

  <script>
    let generatedNumbers = [];
    let totalSum = 0;

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateNumbers() {
      generatedNumbers = [];
      totalSum = 0;

      for (let i = 0; i < 8; i++) {
        let num = randomInt(1, 9);
        if (i === 4 || i === 7 || totalSum > 30) {
          num = randomInt(-9, -1);
        } else if (totalSum + num < 0) {
          while (totalSum + num < 0) {
            num = randomInt(1, 9);
          }
        }
        generatedNumbers.push(num);
        totalSum += num;
      }
    }

    function showNumbers() {
      const numbersDiv = document.getElementById('numbers');
      numbersDiv.innerHTML = generatedNumbers.join('<br>');

      setTimeout(() => {
        document.getElementById('screen2').classList.add('hidden');
        document.getElementById('screen3').classList.remove('hidden');
        document.getElementById('userAnswer').focus();
      }, 3000);
    }

    document.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
        if (!document.getElementById('screen1').classList.contains('hidden')) {
            document.getElementById('screen1').classList.add('hidden');
            document.getElementById('screen2').classList.remove('hidden');
            generateNumbers();
            showNumbers();
        } else if (!document.getElementById('screen3').classList.contains('hidden')) {
            event.preventDefault(); // หยุดการทำงานเริ่มต้น
            submitAnswer();
        }
        }
    });

    function submitAnswer() {
        const userAnswer = parseInt(document.getElementById('userAnswer').value, 10);
        const summaryDiv = document.getElementById('summary');
        
        const resultMessage = userAnswer === totalSum ? 'Correct!' : 'Wrong!';
        const resultClass = userAnswer === totalSum ? 'correct' : 'wrong';

        summaryDiv.innerHTML = `
            <p>Numbers: ${generatedNumbers.join(', ')}</p>
            <p>Correct Sum: ${totalSum}</p>
            <p>Your Answer: ${userAnswer}</p>
            <p class="${resultClass}">${resultMessage}</p>
        `;

        // เคลียร์ช่องคำตอบหลังจากตอบเสร็จ
        document.getElementById('userAnswer').value = '';

        document.getElementById('screen3').classList.add('hidden');
        document.getElementById('screen4').classList.remove('hidden');
        }


    function restartGame() {
      document.getElementById('screen4').classList.add('hidden');
      document.getElementById('screen1').classList.remove('hidden');
    }

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        if (document.getElementById('screen1').classList.contains('hidden')) {
          return;
        }

        document.getElementById('screen1').classList.add('hidden');
        document.getElementById('screen2').classList.remove('hidden');
        generateNumbers();
        showNumbers();
      }
    });
  </script>
</body>
</html>
